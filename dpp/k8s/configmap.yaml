apiVersion: v1
kind: ConfigMap
metadata:
  name: dpp-config
  namespace: dpp-production
  labels:
    app: dpp
data:
  # Application
  LOG_LEVEL: "INFO"
  DPP_JSON_LOGS: "true"

  # AWS Region
  AWS_REGION: "us-east-1"

  # SQS Configuration
  SQS_QUEUE_URL: "https://sqs.us-east-1.amazonaws.com/${AWS_ACCOUNT_ID}/dpp-runs-production"

  # S3 Configuration
  S3_RESULT_BUCKET: "dpp-results-production"

  # CRITICAL (P0-2): Do NOT set SQS_ENDPOINT_URL or S3_ENDPOINT_URL
  # Production must use IAM roles via boto3 default credential chain

  # CORS (P1-G)
  CORS_ALLOWED_ORIGINS: "https://app.example.com,https://dashboard.example.com"

  # Worker Configuration (P0-1: Thread-safe heartbeat)
  WORKER_HEARTBEAT_INTERVAL_SEC: "30"
  WORKER_LEASE_TTL_SEC: "120"

  # Reaper Configuration
  REAPER_INTERVAL_SEC: "30"
  REAPER_SCAN_LIMIT: "100"
  RECONCILE_INTERVAL_SEC: "60"
  RECONCILE_THRESHOLD_MIN: "5"
  RECONCILE_SCAN_LIMIT: "100"
